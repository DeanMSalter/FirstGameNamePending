<!doctype html>
<html lang="HTML">
<script src="https://unpkg.com/react@16/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<link rel="stylesheet" href="index.css">

<head>
    <title>FirstGameNamePending</title>
</head>

<canvas id="gameCanvas"></canvas>
<input type="button" id="startGameBut" value="Start Game"/>

<script type="text/babel">
    const gameCanvas = document.getElementById("gameCanvas");
    const playerRadius = 10;

    let gameStarted = false;
    let playerX = 0;
    let playerY = 0;
    let up = false;
    let down = false;
    let left = false;
    let right = false;
    
    $('document').ready(function(){
        init();
    });

    function init() {
        gameCanvas.width = window.innerWidth;
        gameCanvas.height = window.innerHeight;
        playerX = gameCanvas.width/2;
        playerY = gameCanvas.height - 30;
        document.addEventListener("keydown", keyDownHandler);
        document.addEventListener("keyup", keyUpHandler);
        $("#startGameBut").on("click", startGame)
    }

    function keyDownHandler(e) {
        console.log(e.key);
        switch (e.key) {
            case("w"):
                up = true;
                break;
            case("s"):
                down = true;
                break;
            case("a"):
                left = true;
                break;
            case("d"):
                right = true;
                break;
        }
    }

    function keyUpHandler(e) {
        console.log(e.key);
        switch (e.key) {
            case("w"):
                up = false;
                break;
            case("s"):
                down = false;
                break;
            case("a"):
                left = false;
                break;
            case("d"):
                right = false;
                break;
        }
    }
    
    function drawPlayer() {
        const ctx = gameCanvas.getContext("2d")
        ctx.beginPath();
        ctx.arc(playerX, playerY , playerRadius, 0, Math.PI*2);
        ctx.fillStyle = "#0095DD";
        ctx.fill();
        ctx.closePath();
    }

    function draw() {
        const ctx = gameCanvas.getContext("2d")
        ctx.clearRect(0, 0, gameCanvas.width, gameCanvas.height);
        drawPlayer();
        let dx = 0;
        let dy = 0;
        if (up) {
            dy = -1;
        }
        if (down) {
            dy = 1;
        }
        if (left) {
            dx = -1;
        }
        if (right) {
            dx = 1;
        }

        if(playerX + dx > gameCanvas.width - playerRadius || playerX + dx < playerRadius) {
            dx = -dx;
        }
        if(playerY + dy > gameCanvas.height - playerRadius || playerY + dy < playerRadius) {
            dy = -dy;
        }

        playerX += dx;
        playerY += dy;
    }
    function startGame() {
        gameStarted = true;
        setInterval(draw, 10);
        $("#startGameBut").css("display", "none")
    }
</script>
</html>

